<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NVG Terminal - Proxys & Games Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #00ff88;
            min-height: 100vh;
            padding: 20px;
            overflow: hidden;
        }

        .terminal-container {
            max-width: 1200px;
            height: 90vh;
            margin: 0 auto;
            background: rgba(10, 14, 39, 0.95);
            border: 2px solid #00ff88;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3), inset 0 0 30px rgba(0, 255, 136, 0.05);
            overflow: hidden;
        }

        .terminal-header {
            background: linear-gradient(90deg, #1a1f3a 0%, #2d3454 100%);
            border-bottom: 2px solid #00ff88;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .header-title {
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .header-info {
            color: #00ff88;
            opacity: 0.7;
            font-size: 12px;
        }

        .terminal-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .terminal-body::-webkit-scrollbar {
            width: 8px;
        }

        .terminal-body::-webkit-scrollbar-track {
            background: rgba(0, 255, 136, 0.1);
        }

        .terminal-body::-webkit-scrollbar-thumb {
            background: #00ff88;
            border-radius: 4px;
        }

        .terminal-line {
            display: flex;
            gap: 8px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .prompt {
            color: #00ff88;
            font-weight: bold;
            min-width: max-content;
        }

        .command-input {
            flex: 1;
            color: #00ff88;
            word-break: break-all;
        }

        .output {
            color: #00d4ff;
            padding: 8px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-left: 20px;
        }

        .output.error {
            color: #ff4444;
        }

        .output.success {
            color: #00ff88;
        }

        .output.info {
            color: #ffaa00;
        }

        .output.code {
            color: #00d4ff;
            background: rgba(0, 255, 136, 0.05);
            padding: 12px;
            border-left: 3px solid #00ff88;
            margin: 8px 0;
            overflow-x: auto;
        }

        .terminal-input-line {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            border-top: 1px solid rgba(0, 255, 136, 0.2);
            padding-top: 12px;
        }

        #commandInput {
            flex: 1;
            background: transparent;
            border: none;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
            caret-color: #00ff88;
        }

        .status-bar {
            background: rgba(0, 255, 136, 0.05);
            border-top: 1px solid #00ff88;
            padding: 8px 20px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            color: #00ff88;
            opacity: 0.7;
        }

        .char-count {
            color: #ffaa00;
        }

        .popup-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid #00ff88;
            border-radius: 4px;
            padding: 12px 16px;
            color: #00ff88;
            font-size: 12px;
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .fullscreen-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            z-index: 9999;
        }

        .iframe-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: linear-gradient(90deg, #1a1f3a 0%, #2d3454 100%);
            border-bottom: 2px solid #00ff88;
            z-index: 10000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            box-sizing: border-box;
        }

        .iframe-title {
            color: #00ff88;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 5px rgba(0, 255, 136, 0.5);
        }

        .close-iframe-btn {
            background: #ff4444;
            border: none;
            color: white;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.2s;
        }

        .close-iframe-btn:hover {
            background: #ff6666;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .terminal-container {
                height: 100vh;
                border-radius: 0;
            }
            
            #commandInput {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="header-title">NVG TERMINAL v2.2 - Proxys & Games Edition</div>
            <div class="header-info">Ready for commands</div>
        </div>

        <div class="terminal-body" id="terminalBody">
            <div class="terminal-line">
                <span class="prompt">></span>
                <span class="output">NVG Terminal v2.2 loaded with Proxys & Games support. Type 'help' for commands.</span>
            </div>
        </div>

        <div class="terminal-input-line">
            <span class="prompt">$\:nvg:{</span>
            <input type="text" id="commandInput" placeholder="command" autocomplete="off">
        </div>

        <div class="status-bar">
            <span id="statusText">Ready</span>
            <span class="char-count" id="charCount">0 chars</span>
        </div>
    </div>

    <script>
        const terminalBody = document.getElementById('terminalBody');
        const commandInput = document.getElementById('commandInput');
        const statusText = document.getElementById('statusText');
        const charCount = document.getElementById('charCount');

        // Variable storage
        const variables = {};
        let iframeOpen = false;

        // Plugin system with Proxys & Games
        const plugins = {
            github: {
                name: 'GitHub Pages',
                pattern: /^git:\/\/(.+?)\/(.+?)\/(.*)$/,
                handler: async (match) => {
                    const [, user, repo, path] = match;
                    const url = `https://${user}.github.io/${repo}/${path}`;
                    return { url, type: 'success', content: `GitHub Pages: ${url}` };
                }
            },
            raw_github: {
                name: 'GitHub Raw Content',
                pattern: /^github:\/\/(.+?)\/(.+?)\/(.+?)\/(.*)$/,
                handler: async (match) => {
                    const [, user, repo, branch, path] = match;
                    const url = `https://raw.githubusercontent.com/${user}/${repo}/${branch}/${path}`;
                    return { url, type: 'success', content: `GitHub Raw: ${url}` };
                }
            },
            vercel: {
                name: 'Vercel',
                pattern: /^vercel:\/\/(.+?)\/(.*)$/,
                handler: async (match) => {
                    const [, subdomain, path] = match;
                    const url = `https://${subdomain}.vercel.app/${path}`;
                    return { url, type: 'success', content: `Vercel: ${url}` };
                }
            },
            railway: {
                name: 'Railway',
                pattern: /^railway:\/\/(.+?)\/(.*)$/,
                handler: async (match) => {
                    const [, projectId, path] = match;
                    const url = `https://${projectId}.railway.app/${path}`;
                    return { url, type: 'success', content: `Railway: ${url}` };
                }
            },
            netlify: {
                name: 'Netlify',
                pattern: /^netlify:\/\/(.+?)\/(.*)$/,
                handler: async (match) => {
                    const [, siteName, path] = match;
                    const url = `https://${siteName}.netlify.app/${path}`;
                    return { url, type: 'success', content: `Netlify: ${url}` };
                }
            },
            local: {
                name: 'Local Server',
                pattern: /^local:\/\/(.+?):(\d+)\/(.*)$/,
                handler: async (match) => {
                    const [, host, port, path] = match;
                    const url = `http://${host}:${port}/${path}`;
                    return { url, type: 'success', content: `Local: ${url}` };
                }
            },
            api: {
                name: 'API Gateway',
                pattern: /^api:\/\/(.+?)\/(.*)$/,
                handler: async (match) => {
                    const [, service, path] = match;
                    const apiEndpoints = {
                        'jsonplaceholder': 'https://jsonplaceholder.typicode.com/',
                        'pokeapi': 'https://pokeapi.co/api/v2/',
                    };
                    const baseUrl = apiEndpoints[service] || 'https://api.example.com/';
                    const url = baseUrl + path;
                    return { url, type: 'success', content: `API (${service}): ${url}` };
                }
            },
            proxys_and_games: {
                name: 'Proxys & Games',
                pattern: /^proxys_and_games:\/\/(.+?)$/,
                handler: async (match) => {
                    const [, service] = match;
                    const services = {
                        'rammerhead': 'https://efly.108-181-32-77.sslip.io',
                        'petezah': 'https://tubmledxeni.viar3d.com',
                        'nextbrowser': 'https://92850.vercel.app',
                        'macvg': 'https://kbsigmaboy67.github.io/macvg/'
                    };
                    const url = services[service.toLowerCase()] || 'https://example.com';
                    return { url, type: 'success', content: `Proxy/Game: ${service} - ${url}` };
                }
            }
        };

        // Custom Command Parser
        function parseCustomCommand(input) {
            // nvg-git-launch {HTML[`git://...`] blob, popup}
            const gitLaunchMatch = input.match(/nvg-git-launch\s*\{\s*HTML\[\s*`([^`]+)`\s*\]\s*([\w\s,]+)\s*\}/i);
            if (gitLaunchMatch) {
                return {
                    type: 'nvg-git-launch',
                    gitUrl: gitLaunchMatch[1],
                    options: gitLaunchMatch[2].split(',').map(o => o.trim().toLowerCase())
                };
            }

            // nvg-fetch-html {git://... html-blob}
            const fetchHtmlMatch = input.match(/nvg-fetch-html\s*\{\s*([^\s]+)\s+([\w-]+)\s*\}/i);
            if (fetchHtmlMatch) {
                return {
                    type: 'nvg-fetch-html',
                    url: fetchHtmlMatch[1],
                    target: fetchHtmlMatch[2].toLowerCase()
                };
            }

            // nvg-open-raw {git://... blob, popup}
            const openRawMatch = input.match(/nvg-open-raw\s*\{\s*([^\s]+)\s+([\w\s,]+)\s*\}/i);
            if (openRawMatch) {
                return {
                    type: 'nvg-open-raw',
                    url: openRawMatch[1],
                    options: openRawMatch[2].split(',').map(o => o.trim().toLowerCase())
                };
            }

            // nvg-iframe {proxys_and_games://... fullscreen}
            const iframeMatch = input.match(/nvg-iframe\s*\{\s*([^\s]+)\s*([\w\s,]*)\s*\}/i);
            if (iframeMatch) {
                return {
                    type: 'nvg-iframe',
                    url: iframeMatch[1],
                    options: iframeMatch[2] ? iframeMatch[2].split(',').map(o => o.trim().toLowerCase()) : ['fullscreen']
                };
            }

            return null;
        }

        // Open fullscreen iframe with hidden src
        function openFullscreenIframe(url, title) {
            if (iframeOpen) {
                closeFullscreenIframe();
            }

            const header = document.createElement('div');
            header.className = 'iframe-header';
            header.id = 'iframe-header';
            header.innerHTML = `
                <span class="iframe-title">${title || 'Fullscreen Iframe'}</span>
                <button class="close-iframe-btn" onclick="closeFullscreenIframe()">‚úï Close</button>
            `;
            document.body.appendChild(header);

            const iframe = document.createElement('iframe');
            iframe.className = 'fullscreen-iframe';
            iframe.id = 'fullscreen-iframe';
            iframe.style.marginTop = '50px';
            iframe.style.height = 'calc(100% - 50px)';
            iframe.allow = 'fullscreen; picture-in-picture; accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; payment; usb; xr-spatial-tracking';
            iframe.src = url;
            document.body.appendChild(iframe);

            iframeOpen = true;
            showNotification(`Opened: ${title}`);
        }

        function closeFullscreenIframe() {
            const iframe = document.getElementById('fullscreen-iframe');
            const header = document.getElementById('iframe-header');
            if (iframe) iframe.remove();
            if (header) header.remove();
            iframeOpen = false;
            showNotification('Iframe closed');
        }

        // Execute custom commands
        async function executeCustomCommand(parsed) {
            if (parsed.type === 'nvg-iframe') {
                try {
                    let url = parsed.url;
                    
                    // Resolve plugin URLs
                    for (const [key, plugin] of Object.entries(plugins)) {
                        const match = url.match(plugin.pattern);
                        if (match) {
                            const result = await plugin.handler(match);
                            url = result.url;
                            break;
                        }
                    }

                    const title = parsed.url.includes('://') ? parsed.url.split('://')[1] : parsed.url;
                    openFullscreenIframe(url, title);
                    return { type: 'success', content: `‚úì Fullscreen iframe opened: ${url}` };
                } catch (error) {
                    return { type: 'error', content: `Error: ${error.message}` };
                }
            }

            if (parsed.type === 'nvg-git-launch') {
                try {
                    const gitUrl = parsed.gitUrl;
                    
                    let actualUrl = gitUrl;
                    for (const [key, plugin] of Object.entries(plugins)) {
                        const match = gitUrl.match(plugin.pattern);
                        if (match) {
                            const result = await plugin.handler(match);
                            actualUrl = result.url;
                            break;
                        }
                    }

                    const response = await fetch(actualUrl);
                    const htmlContent = await response.text();
                    const windowId = `nvg_git_launch_${Date.now()}`;
                    const isPopup = parsed.options.includes('popup');

                    if (isPopup) {
                        const newWindow = window.open('about:blank', windowId, 'width=1024,height=768,resizable=yes');
                        if (newWindow) {
                            newWindow.document.write(htmlContent);
                            newWindow.document.close();
                            showNotification(`Git HTML launched in popup`);
                            return { type: 'success', content: `‚úì Launched in popup: ${gitUrl}` };
                        }
                    } else {
                        const blob = new Blob([htmlContent], { type: 'text/html' });
                        const blobUrl = URL.createObjectURL(blob);
                        const newWindow = window.open(blobUrl, windowId, 'width=1024,height=768,resizable=yes');
                        if (newWindow) {
                            showNotification(`Git HTML launched in blob`);
                            return { type: 'success', content: `‚úì Launched in blob: ${gitUrl}` };
                        }
                    }

                    return { type: 'error', content: 'Popup blocked' };
                } catch (error) {
                    return { type: 'error', content: `Error: ${error.message}` };
                }
            }

            if (parsed.type === 'nvg-fetch-html') {
                try {
                    const url = parsed.url;
                    let actualUrl = url;
                    for (const [key, plugin] of Object.entries(plugins)) {
                        const match = url.match(plugin.pattern);
                        if (match) {
                            const result = await plugin.handler(match);
                            actualUrl = result.url;
                            break;
                        }
                    }

                    const response = await fetch(actualUrl);
                    const content = await response.text();
                    const windowId = `nvg_fetch_${Date.now()}`;

                    if (parsed.target.includes('html')) {
                        const isPopup = parsed.target.includes('popup');
                        if (isPopup) {
                            const newWindow = window.open('about:blank', windowId, 'width=1024,height=768,resizable=yes');
                            if (newWindow) {
                                newWindow.document.write(content);
                                newWindow.document.close();
                                return { type: 'success', content: `‚úì Opened in popup` };
                            }
                        } else {
                            const blob = new Blob([content], { type: 'text/html' });
                            const blobUrl = URL.createObjectURL(blob);
                            const newWindow = window.open(blobUrl, windowId, 'width=1024,height=768,resizable=yes');
                            if (newWindow) {
                                return { type: 'success', content: `‚úì Opened in blob` };
                            }
                        }
                    } else if (parsed.target.includes('text')) {
                        const isPopup = parsed.target.includes('popup');
                        if (isPopup) {
                            const newWindow = window.open('about:blank', windowId, 'width=800,height=600,resizable=yes');
                            if (newWindow) {
                                newWindow.document.write(`<html><body style="font-family:monospace;white-space:pre;overflow:auto;padding:20px;"><code>${content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</code></body></html>`);
                                newWindow.document.close();
                                return { type: 'success', content: `‚úì Text opened in popup` };
                            }
                        }
                    }

                    return { type: 'error', content: 'Popup blocked' };
                } catch (error) {
                    return { type: 'error', content: `Error: ${error.message}` };
                }
            }

            if (parsed.type === 'nvg-open-raw') {
                try {
                    const url = parsed.url;
                    let actualUrl = url;
                    for (const [key, plugin] of Object.entries(plugins)) {
                        const match = url.match(plugin.pattern);
                        if (match) {
                            const result = await plugin.handler(match);
                            actualUrl = result.url;
                            break;
                        }
                    }

                    const response = await fetch(actualUrl);
                    const content = await response.text();
                    const windowId = `nvg_raw_${Date.now()}`;
                    const isPopup = parsed.options.includes('popup');

                    if (isPopup) {
                        const newWindow = window.open('about:blank', windowId, 'width=1024,height=768,resizable=yes');
                        if (newWindow) {
                            newWindow.document.write(content);
                            newWindow.document.close();
                            return { type: 'success', content: `‚úì Loaded in popup` };
                        }
                    } else {
                        const blob = new Blob([content], { type: 'text/html' });
                        const blobUrl = URL.createObjectURL(blob);
                        const newWindow = window.open(blobUrl, windowId, 'width=1024,height=768,resizable=yes');
                        if (newWindow) {
                            return { type: 'success', content: `‚úì Loaded in blob` };
                        }
                    }

                    return { type: 'error', content: 'Popup blocked' };
                } catch (error) {
                    return { type: 'error', content: `Error: ${error.message}` };
                }
            }

            return null;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'popup-notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function addLine(content, type = 'output') {
            const line = document.createElement('div');
            line.className = 'terminal-line';

            if (typeof content === 'object') {
                const prompt = document.createElement('span');
                prompt.className = 'prompt';
                prompt.textContent = '>';

                const output = document.createElement('span');
                output.className = `output ${content.type}`;
                output.textContent = content.content;
                line.appendChild(prompt);
                line.appendChild(output);
            } else {
                const prompt = document.createElement('span');
                prompt.className = 'prompt';
                prompt.textContent = '>';

                const output = document.createElement('span');
                output.className = `output ${type}`;
                output.style.whiteSpace = 'pre-wrap';
                output.textContent = content;
                line.appendChild(prompt);
                line.appendChild(output);
            }

            terminalBody.appendChild(line);
            terminalBody.scrollTop = terminalBody.scrollHeight;
        }

        function addCommandLine(cmd) {
            const line = document.createElement('div');
            line.className = 'terminal-line';

            const prompt = document.createElement('span');
            prompt.className = 'prompt';
            prompt.textContent = '$\\:nvg:{';

            const command = document.createElement('span');
            command.className = 'command-input';
            command.textContent = cmd;

            line.appendChild(prompt);
            line.appendChild(command);
            terminalBody.appendChild(line);
            terminalBody.scrollTop = terminalBody.scrollHeight;
        }

        const commands = {
            help: () => `
CUSTOM COMMANDS & PROXYS/GAMES:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üéÆ NEW PROXYS & GAMES PLUGIN:

nvg-iframe
  Format: nvg-iframe { proxys_and_games://<service> fullscreen }
  Services: rammerhead, petezah, nextbrowser, macvg
  
  Examples:
    $\\:nvg:{ nvg-iframe { proxys_and_games://rammerhead fullscreen }
    $\\:nvg:{ nvg-iframe { proxys_and_games://petezah fullscreen }
    $\\:nvg:{ nvg-iframe { proxys_and_games://nextbrowser fullscreen }
    $\\:nvg:{ nvg-iframe { proxys_and_games://macvg fullscreen }

üéØ SERVICES:
  ‚Ä¢ rammerhead   - https://efly.108-181-32-77.sslip.io
  ‚Ä¢ petezah      - https://tubmledxeni.viar3d.com
  ‚Ä¢ nextbrowser  - https://92850.vercel.app
  ‚Ä¢ macvg        - https://kbsigmaboy67.github.io/macvg/

üìñ EXISTING COMMANDS:

nvg-git-launch { HTML[\`git://...\`] blob, popup }
nvg-fetch-html { <url> html-blob | html-popup | text-blob }
nvg-open-raw { <url> blob, popup }

üì¶ VARIABLES:
  var <n> = <value>  - Set variable
  var <n>            - Get variable
  var list             - List all

üîß UTILITIES:
  echo <text>  - Print
  clear        - Clear terminal
  about        - About terminal
`,
            var: (args) => {
                if (!args.length) return { type: 'error', content: 'Usage: var <n> [= value]' };
                
                if (args[0] === 'list') {
                    if (Object.keys(variables).length === 0) return 'No variables set.';
                    let output = '\nüì¶ VARIABLES:\n';
                    Object.entries(variables).forEach(([name, value]) => {
                        output += `  ${name} = ${value}\n`;
                    });
                    return output;
                }

                if (args[1] === '=' && args.length > 2) {
                    const value = args.slice(2).join(' ');
                    variables[args[0]] = value;
                    return { type: 'success', content: `‚úì ${args[0]} = ${value}` };
                }

                if (variables[args[0]]) {
                    return `${args[0]} = ${variables[args[0]]}`;
                }

                return { type: 'error', content: `Variable '${args[0]}' not defined.` };
            },
            echo: (args) => args.join(' '),
            clear: () => { terminalBody.innerHTML = ''; return null; },
            about: () => `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë    NVG TERMINAL v2.2 - Proxys & Games Edition         ‚ïë
‚ïë   Fullscreen Iframe Support with Hidden Sources       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

FEATURES:
  ‚úì Fullscreen iframe support
  ‚úì 4 proxy/game services
  ‚úì Custom HTML blob loading
  ‚úì Plugin system (8+ providers)
  ‚úì Variable storage

NEW IN v2.2:
  ‚Ä¢ nvg-iframe command for fullscreen
  ‚Ä¢ Proxys & Games plugin
  ‚Ä¢ Hidden iframe source attributes
  ‚Ä¢ Full feature parity with v2.1

SERVICES:
  Rammerhead, Petezah, NextBrowser, MacVG

Type 'help' for command reference.
`
        };

        async function executeCommand(input) {
            addCommandLine(input);

            // Check for custom commands first
            const customParsed = parseCustomCommand(input);
            if (customParsed) {
                try {
                    const result = await executeCustomCommand(customParsed);
                    if (result) {
                        addLine(result, result.type ? result.type : 'output');
                    }
                    statusText.textContent = 'Ready';
                    return;
                } catch (error) {
                    addLine(`Error: ${error.message}`, 'error');
                    statusText.textContent = 'Ready';
                    return;
                }
            }

            const parts = input.trim().split(/\s+/);
            const cmd = parts[0]?.toLowerCase();
            const args = parts.slice(1);

            if (!cmd || !commands[cmd]) {
                addLine(`Command not found. Type 'help' for available commands.`, 'error');
                statusText.textContent = 'Ready';
                return;
            }

            try {
                const result = await commands[cmd](args);
                if (result !== null) {
                    addLine(result, result.type ? result.type : 'output');
                }
            } catch (error) {
                addLine(`Error: ${error.message}`, 'error');
            }

            statusText.textContent = 'Ready';
        }

        commandInput.addEventListener('keypress', async (e) => {
            if (e.key === 'Enter') {
                const input = commandInput.value.trim();
                if (input) {
                    commandInput.value = '';
                    await executeCommand(input);
                }
            }
        });

        commandInput.addEventListener('input', (e) => {
            charCount.textContent = `${e.target.value.length} chars`;
        });

        // Make closeFullscreenIframe global
        window.closeFullscreenIframe = closeFullscreenIframe;

        addLine('Welcome to NVG Terminal v2.2 - Proxys & Games Edition. Type "help" for commands.', 'info');
        commandInput.focus();
    </script>
</body>
</html>
